# ReScript Cache Implementation Benchmark

This is a benchmark for Map collection, which is mainly used as a cache implementation in JS.

- JavaScript `Map` class
- Belt's `Map` module
- Belt's `HashMap` module

## Results

Tested on Ubuntu 22.10 x86_64, Node.js v20.0.0, Intel i5-9600K (6) @ 4.600GHz

```
Case 1 - make empty collection
┌─────────┬──────────────────────────┬──────────────┬────────────────────┬──────────┬─────────┐
│ (index) │        Task Name         │   ops/sec    │ Average Time (ns)  │  Margin  │ Samples │
├─────────┼──────────────────────────┼──────────────┼────────────────────┼──────────┼─────────┤
│    0    │    'make empty JsMap'    │ '9,359,816'  │ 106.83969876631951 │ '±0.66%' │ 4679909 │
│    1    │   'make empty BeltMap'   │ '10,266,941' │ 97.39998711078677  │ '±0.21%' │ 5133471 │
│    2    │ 'make empty BeltHashMap' │ '10,174,040' │ 98.28936482392851  │ '±0.39%' │ 5087021 │
└─────────┴──────────────────────────┴──────────────┴────────────────────┴──────────┴─────────┘

Case 1 - set initial 10 entries
┌─────────┬──────────────────────────────┬───────────┬───────────────────┬──────────┬─────────┐
│ (index) │          Task Name           │  ops/sec  │ Average Time (ns) │  Margin  │ Samples │
├─────────┼──────────────────────────────┼───────────┼───────────────────┼──────────┼─────────┤
│    0    │    'set JsMap 10 entires'    │ '89,966'  │ 11115.26029263672 │ '±0.78%' │  44984  │
│    1    │   'set BeltMap 10 entries'   │ '106,550' │ 9385.259422069867 │ '±0.68%' │  53276  │
│    2    │ 'set BeltHashMap 10 entries' │ '218,210' │ 4582.720675481438 │ '±0.73%' │ 109106  │
└─────────┴──────────────────────────────┴───────────┴───────────────────┴──────────┴─────────┘

Case 3 - get an existing entry
┌─────────┬─────────────────────────┬─────────────┬────────────────────┬──────────┬─────────┐
│ (index) │        Task Name        │   ops/sec   │ Average Time (ns)  │  Margin  │ Samples │
├─────────┼─────────────────────────┼─────────────┼────────────────────┼──────────┼─────────┤
│    0    │    'get JsMap entry'    │ '1,048,757' │ 953.5090309935534  │ '±0.65%' │ 524379  │
│    1    │   'get BeltMap entry'   │ '9,398,112' │ 106.40434493976117 │ '±0.56%' │ 4699057 │
│    2    │ 'get BeltHashMap entry' │ '4,409,777' │ 226.76881565404227 │ '±6.53%' │ 2204889 │
└─────────┴─────────────────────────┴─────────────┴────────────────────┴──────────┴─────────┘
```

## LICENSE

MIT
